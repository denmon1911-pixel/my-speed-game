html
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Telegram Speed Master 2025</title>
    <!-- Исправленный скрипт Telegram и консоль Eruda -->
    <script src="telegram.org"></script>
    <script src="cdn.jsdelivr.net"></script>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; background: #1a1a1a; color: #ffffff; font-family: -apple-system, sans-serif; }
        #gameFrame { border: none; width: 100vw; height: calc(100vh - 85px); background: #000; }
        .controls { 
            height: 85px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            background: #2c2c2e; 
            border-top: 1px solid #3a3a3c;
            padding: 0 15px;
        }
        .row { display: flex; align-items: center; width: 100%; justify-content: space-between; margin: 4px 0; }
        input[type="range"] { flex: 1; margin: 0 15px; accent-color: #007aff; }
        .speed-val { font-weight: bold; min-width: 50px; text-align: right; color: #007aff; font-size: 18px; }
        label { display: flex; align-items: center; font-size: 14px; }
        .hint { font-size: 10px; color: #888; margin-top: 2px; }
    </style>
</head>
<body>

    <!-- ССЫЛКА НА ИГРУ -->
    <iframe id="gameFrame" src="https://t.me/EmpiresBattleBot/start"></iframe>

    <div class="controls">
        <div class="row">
            <label><input type="checkbox" id="enableSpeed" checked style="width:20px; height:20px; margin-right:10px;"> Активен</label>
            <div class="speed-val" id="speedVal">1.0x</div>
        </div>
        <div class="row">
            <span>0.1x</span>
            <input type="range" id="speedRange" min="1" max="100" value="10">
            <span>10x</span>
        </div>
        <div class="hint">Если не работает: жми шестеренку -> Console -> вставь код</div>
    </div>

    <script>
        // Инициализация консоли Eruda для Android
        eruda.init();

        // 1. ПОДГОТОВКА КОДА ДЛЯ КОНСОЛИ (для ручного ввода на Android)
        console.log("%cИНСТРУКЦИЯ ДЛЯ ТЕЛЕФОНА:", "color: yellow; font-size: 16px; font-weight: bold;");
        console.log("Скопируй код ниже, вставь в строку Console и нажми Enter:");
        console.log(`
(function() {
    const s = parseFloat(prompt("Введите скорость (например 2.5):", "2.0")) || 2.0;
    const win = document.getElementById('gameFrame').contentWindow || window;
    const originalST = win.setTimeout, originalSI = win.setInterval, originalNow = win.Date.now;
    win.setTimeout = (f, d, ...a) => originalST(f, d / s, ...a);
    win.setInterval = (f, d, ...a) => originalSI(f, d / s, ...a);
    const start = originalNow.call(win.Date);
    win.Date.now = () => start + (originalNow.call(win.Date) - start) * s;
    if (win.performance) {
        const pStart = win.performance.now();
        win.performance.now = () => pStart + (originalNow.call(win.Date) - start) * s;
    }
    alert("Ускорение " + s + "x запущено!");
})();
        `);

        // 2. ЯДРО УПРАВЛЕНИЯ (БРАУЗЕРНАЯ ЧАСТЬ)
        const range = document.getElementById('speedRange');
        const checkbox = document.getElementById('enableSpeed');
        const valDisplay = document.getElementById('speedVal');
        const frame = document.getElementById('gameFrame');

        function sendCommand() {
            const speed = range.value / 10;
            const isEnabled = checkbox.checked;
            
            valDisplay.innerText = isEnabled ? speed.toFixed(1) + 'x' : 'OFF';

            const payload = {
                __speedmaster: true,
                type: isEnabled ? 'APPLY' : 'RESET',
                payload: {
                    speed: speed,
                    cbSetIntervalChecked: true,
                    cbSetTimeoutChecked: true,
                    cbPerformanceNowChecked: true,
                    cbDateNowChecked: true,
                    cbRequestAnimationFrameChecked: true,
                    media: true,
                    css: true
                }
            };

            // Пробуем отправить во фрейм
            if (frame.contentWindow) {
                frame.contentWindow.postMessage(payload, '*');
            }
        }

        range.addEventListener('input', sendCommand);
        checkbox.addEventListener('change', sendCommand);

        // Настройка Telegram Mini App
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();
    </script>
</body>
</html>